### 회원가입시 로그인아이디 중복체크 (Ajax)

**1\) UsrMemberController getLoginIdDup()**

```java
@RequestMapping("/usr/member/getLoginIdDup")
	@ResponseBody
	public ResultData getLoginIdDup(String loginId) {
		if (Ut.empty(loginId)) {
			return ResultData.from("F-A", "아이디를 입력해주세요");
		}

		Member exsistMember = memberService.getMemberByLoginId(loginId);

		if (exsistMember != null) {
			return ResultData.from("F-A2", "이미 사용중인 아이디입니다.", "loginId", loginId);
		}

		return ResultData.from("S-1", "사용 가능한 아이디 입니다.", "loginId", loginId);
	}
```

- 로그인아이디 체크를 하는 메서드
- 입력받은 로그인아이디가 DB에 중복되는지 확인하여 ResultData로 반환

**2\) checkLoginIdDup()**

```javascript
	let loginIdDup = true;
	function checkLoginIdDup(el) {
		$('.loginId-msg').empty();
		const form = $(el).closest('form').get(0);

		$.get('../member/getLoginIdDup', {			
			loginId : form.loginId.value,
			ajaxMode : 'Y'
		}, function(data) {
			$('.loginId-msg').html('<div class="mt-2">' + data.msg + '</div>');
			if (data.success) {
				loginIdDup = false;
			} else {
				loginIdDup = true;
			}
		}, 'json');
	}
```

- 회원가입 뷰에서 Ajax사용하여 로그인 아이디 중복체크
- ```loginIdDup 변수``` : Ajax통신을하여 가져온 ResultData를 바탕으로 변수 조작하여 submit제한
- ResultData의 isSuccess()메소드가 true라면 ```loginIdDup = false``` 즉, 중복되지 않음
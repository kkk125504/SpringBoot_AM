### 회원가입 폼 제작, 가입 후 로그인하면 uri 정보유지

**1\) 회원가입 uri**

```java
public String getJoinUri() {
		return "../member/join?afterLoginUri=" + getAfterLoginUri();
	}
```

- head.jsp 즉, 페이지 상단에 회원가입 버튼 클릭시 이동하는 uri를 반환하는 메소드
- 회원 가입후 로그인 페이지로 이동 시키고 로그인 후 ```이동될 페이지 정보```를 유지하기 위해
- ```afterLoginUri = getAfterLoginUri()```를 추가



**2\) join.jsp**

```java
<input type="hidden" name="afterLoginUri" value="${param.afterLoginUri}" />
```

- 회원가입 페이지에서 가입후 이동될 uri정보( ```afterLoginUri``` ) 함께 전송



**3\) doJoin**

```java
@RequestMapping("/usr/member/doJoin")
	@ResponseBody
	public String doJoin(String loginId, String loginPw, String name, String nickname, String cellphoneNum,
			String email, @RequestParam(defaultValue = "/") String afterLoginUri) {
		if (Ut.empty(loginId)) {
			return rq.jsHistoryBack("F-1", "아이디를 입력해주세요");
	             
             			~~~ 생략 ~~~

		String afterJoinUri = "../member/login?afterLoginUri=" + Ut.getUriEncoded(afterLoginUri);
		return rq.jsReplace("회원가입이 완료되었습니다. 로그인 후 이용해주세요", afterJoinUri);
	}
```

- 회원 가입후 이동 될 Uri(```afterJoinUri```) 는 로그인 페이지 Uri + 로그인후 이동될 Uri 즉, 회원가입 전 원래 페이지(```afterLoginUri```) 
- ```afterLoginUri```는 join.jsp에서 전송받은 uri